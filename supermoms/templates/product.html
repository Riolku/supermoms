{%- extends 'layout.html' -%}

{%- block title -%}
Super Moms Club - {{ p.type }}
{%- endblock -%}

{%- block content -%}

<div class="parallax-container" style="height:40vh">
  <div class="parallax">
    <img src="/static/images/banner-2.jpg" width=100vw />
  </div>
</div>

<div class="container">
  <br><br><br>
  
  {% include 'flashes.html' %}
  
  <h2>
    {{ name }}
  </h2>
  
  <form method="post">
    
    <div class="row">
      <div class="col s4">
        <img src="/product/{{ p.id }}/image" class="responsive-img"/>      
      </div>
      
      <div class="col s8 mdbox">
        {{ p.desc | markdown | safe }}
      </div>
    </div>

    <div class="divider"></div>
    
    <br>
    
    {% if registered %}
      <p>
        You have already registered for this workshop.
      </p>    
    {% elif cart %}
      <p>
        You have added this workshop to your cart, and should proceed to <a href="/view-cart/">checkout</a> to confirm your registration.  
      </p>
    
      <button name="remove_cart" class="btn pink lighten-2 waves-effect" type="submit">
        Remove from Cart
      </button>
    {% elif p.workshop %}
      <div class="row">
        <div class="col">
          <button name="register" class="btn pink lighten-2 waves-effect" type="submit">
            Register
          </button>
        </div>
      </div>
    {% elif cur_qty > 0 %}
      <p>
        You have {{ cur_qty }} of this item in your cart.
      </p>
    
      <div class="row">
        <div class="col s2 input-field">
          <input type="number" id="qty" name="qty" min="0" max="{{p.stock}}"/>
          <label for="qty">New Quantity</label>
        </div>
      </div>

      <div class="row">
        <div class="col s3">
          
          <button name="register" class="btn pink lighten-2 waves-effect" type="submit">
            Update Cart
          </button>
        </div>
      </div>
    {% elif p.stock == 0 %}
      <p>
        Out of stock.
      </p>  
    {% else %}
      <div class="row">
        <div class="col s2 input-field">
          <input type="number" id="qty" name="qty" min="0" max="{{p.stock}}"/>
          <label for="qty">Quantity</label>
        </div>
      </div>

      <div class="row">
        <div class="col s3">
          
          <button name="register" class="btn pink lighten-2 waves-effect" type="submit">
            Add to Cart
          </button>
        </div>
      </div>
    
    {% endif %}
    
    <br><br>
    
  </form>
  
</div>

<div class="parallax-container" style="height:40vh">
  <div class="parallax">
    <img src="/static/images/banner-3.jpg" width=100vw />
  </div>
</div>

{%- endblock -%}